<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Solar Savings Calculator | Dakshayani Enterprises</title>
  <meta name="description" content="Calculate your potential savings, required system size, and investment for rooftop solar in Jharkhand."/>

  <link rel="icon" href="images/favicon.ico" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <style>
    .calculator-hero {
        background: linear-gradient(135deg, var(--base-900), var(--base-700));
        color: white;
        text-align: center;
        padding: 4rem 1rem;
    }
    .calculator-panel {
        background: var(--surface);
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .form-group {
        margin-bottom: 1.5rem;
    }
    .form-group label {
        display: block;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--base-700);
    }
    .form-group input, .form-group select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--base-300);
        border-radius: 0.5rem;
        font-size: 1rem;
        transition: border-color 0.2s ease;
    }
    .form-group input:focus, .form-group select:focus {
        border-color: var(--primary-500);
        outline: none;
        box-shadow: 0 0 0 2px rgba(251, 191, 36, 0.5);
    }
    .result-box {
        text-align: center;
        padding: 2rem;
        border-radius: 1rem;
        background: var(--primary-50);
        margin-top: 2rem;
        border: 2px solid var(--primary-500);
    }
    .result-value {
        font-size: 2.5rem;
        font-weight: 900;
        color: var(--base-900);
        margin-bottom: 0.5rem;
    }
    .result-label {
        color: var(--base-700);
        font-weight: 600;
    }
  </style>
</head>
<body>

  <!-- HEADER injected via script.js -->
  <header class="site-header"></header>

  <main>
    <!-- Page Header/Hero -->
    <section class="calculator-hero">
      <div class="container">
        <h1 class="title" style="color:var(--surface);">Solar Savings Calculator</h1>
        <p class="sub" style="color:rgba(255,255,255,.9); max-width: 800px; margin: 0 auto;">Estimate your optimal solar system size, installation cost, and potential savings.</p>
      </div>
    </section>

    <!-- Calculator Section -->
    <section class="section">
      <div class="container grid" style="grid-template-columns: 2fr 1fr; gap: 3rem;">
        <!-- Input Form -->
        <div class="calculator-panel">
            <h2 class="title" style="margin-top: 0;">Enter Your Details</h2>
            <form id="solar-calculator-form">
                <div class="form-group">
                    <label for="monthly-consumption">Monthly Electricity Consumption (Units)</label>
                    <input type="number" id="monthly-consumption" placeholder="e.g., 400" required />
                    <p style="font-size: 0.85rem; color: var(--base-500); margin-top: 0.25rem;">(Average monthly bill units from JBVNL/DISCOM)</p>
                </div>
                <div class="form-group">
                    <label for="avg-bill">Average Monthly Electricity Bill (INR)</label>
                    <input type="number" id="avg-bill" placeholder="e.g., 2500" required />
                </div>
                <div class="form-group">
                    <label for="system-type">System Type</label>
                    <select id="system-type">
                        <option value="residential">Residential (PM Surya Ghar)</option>
                        <option value="commercial">Commercial / Industrial</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Calculate My Solar Potential</button>
            </form>
        </div>

        <!-- Results Display -->
        <div id="results-display" class="calculator-panel">
            <h2 class="title" style="margin-top: 0;">Your Solar Estimate</h2>
            <div id="loading" style="text-align: center; padding: 2rem; display: none;">
                <i class="fa-solid fa-spinner fa-spin fa-2x" style="color: var(--primary-500);"></i>
                <p>Calculating...</p>
            </div>
            <div id="initial-message">
                <p class="copy" style="text-align: center; color: var(--base-500);">Fill out the form to see your recommended system size, estimated cost, and annual savings.</p>
            </div>
            
            <div id="calculated-results" style="display: none;">
                <div class="result-box">
                    <div class="result-label">Recommended System Size</div>
                    <div class="result-value" id="system-size-output">0 kW</div>
                </div>
                
                <div class="grid cols-2" style="margin-top: 1.5rem;">
                    <div class="result-box" style="padding: 1rem 0.5rem; background: var(--surface); border: 1px solid var(--base-200);">
                        <div class="result-label" style="font-size: 0.9rem;">Est. Annual Savings</div>
                        <div class="result-value" id="annual-savings-output" style="font-size: 1.5rem;">₹0</div>
                    </div>
                    <div class="result-box" style="padding: 1rem 0.5rem; background: var(--surface); border: 1px solid var(--base-200);">
                        <div class="result-label" style="font-size: 0.9rem;">Est. Investment (Net)</div>
                        <div class="result-value" id="net-cost-output" style="font-size: 1.5rem;">₹0</div>
                    </div>
                </div>
                
                <a href="contact.html" class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;">Get Accurate Quote</a>
            </div>
        </div>
      </div>
    </section>

    <!-- Calculator Logic Script -->
    <script>
        document.getElementById('solar-calculator-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const consumption = parseFloat(document.getElementById('monthly-consumption').value);
            const bill = parseFloat(document.getElementById('avg-bill').value);
            const type = document.getElementById('system-type').value;

            if (isNaN(consumption) || consumption <= 0) {
                // Using console.error instead of alert() as required
                console.error('Please enter a valid monthly consumption.');
                return;
            }

            const resultsContainer = document.getElementById('calculated-results');
            const initialMessage = document.getElementById('initial-message');
            const loading = document.getElementById('loading');

            initialMessage.style.display = 'none';
            resultsContainer.style.display = 'none';
            loading.style.display = 'block';

            // --- Calculation Logic (Approximate, for illustrative purposes) ---
            
            // 1. Calculate required system size (kWp)
            // Rule of thumb: 1 kWp generates approx 140 units/month in Ranchi
            const unitsPerKw = 140; 
            let requiredSize = Math.ceil(consumption / unitsPerKw);

            // Cap residential size for illustrative purposes
            if (type === 'residential' && requiredSize > 10) requiredSize = 10;
            if (requiredSize < 1) requiredSize = 1;

            // 2. Calculate Gross Cost (Approximate benchmark for Jharkhand)
            // Avg cost per kWp: ~₹50,000 for simplicity.
            const costPerKw = 50000;
            let grossCost = requiredSize * costPerKw;
            
            // 3. Calculate Subsidy (as per PM Surya Ghar up to 3kW)
            let subsidy = 0;
            if (type === 'residential') {
                if (requiredSize <= 2) {
                    // ₹30,000 per kW
                    subsidy = requiredSize * 30000;
                } else {
                    // ₹60,000 for first 2kW, plus ₹18,000 for 3rd kW (Total ₹78,000)
                    subsidy = 78000;
                }
                // Cap subsidy at the max of ₹78,000
                subsidy = Math.min(subsidy, 78000);
            }

            // 4. Calculate Net Cost (Investment)
            let netCost = grossCost - subsidy;
            if (netCost < 0) netCost = 0; // Should not happen with realistic costs

            // 5. Calculate Annual Savings (Approx. 12 times the monthly bill)
            const annualSavings = bill * 12; 

            // --- Display Results with a small delay for the 'loading' effect ---
            setTimeout(() => {
                document.getElementById('system-size-output').textContent = requiredSize.toFixed(1) + ' kWp';
                document.getElementById('annual-savings-output').textContent = '₹' + annualSavings.toLocaleString('en-IN');
                document.getElementById('net-cost-output').textContent = '₹' + netCost.toLocaleString('en-IN');
                
                loading.style.display = 'none';
                resultsContainer.style.display = 'block';
            }, 800);
        });
    </script>
  </main>

  <!-- FOOTER injected via script.js -->
  <footer class="site-footer"></footer>

  <!-- Partials loader script -->
  <script src="script.js" defer></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L7QF20V43H"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L7QF20V43H');
    </script>
    
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="favicon.ico" />
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dakshayani Enterprises | Reliable Solar for Home & Business in Ranchi</title>
    <meta name="description" content="Dakshayani Enterprises is a leading solar EPC company in Ranchi, Jharkhand, specializing in residential (PM Surya Ghar), commercial, and industrial solar solutions.">
    <meta name="keywords" content="solar panels ranchi, solar company jharkhand, pm surya ghar yojana, solar for petrol pump, commercial solar solutions, dakshayani enterprises">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" xintegrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0V4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="style.css">
</head>
<body class="text-gray-700">

    <header class="header-bg text-white shadow-md sticky top-0 z-50" id="main-header">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="flex items-center">
                <div class="flex items-center space-x-2 logo-container">
                    <img src="images/New dakshayani logo centered small.png" alt="Dakshayani Enterprises Logo" class="h-8 w-auto">
                    <span class="text-2xl font-extrabold tracking-tight text-gray-900">Dakshayani Enterprises</span>
                </div>
            </a>

            <nav class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="text-solar-gold font-semibold transition-all-smooth">Home</a>
                <a href="about.html" class="hover:text-solar-gold transition-all-smooth">About Us</a>
                <a href="projects.html" class="hover:text-solar-gold transition-all-smooth">Solutions</a>
                
                <div class="relative group">
                    <button class="hover:text-solar-gold transition-all-smooth flex items-center">
                        <span>More</span>
                        <svg class="w-4 h-4 ml-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </button>
                    <div class="absolute -left-8 mt-2 w-48 bg-white text-gray-800 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all-smooth">
                        <a href="calculator.html" class="block px-4 py-2 hover:bg-gray-100 rounded-t-lg">Calculator</a>
                        <a href="financing.html" class="block px-4 py-2 hover:bg-gray-100">Financing</a>
                        <a href="rewards.html" class="block px-4 py-2 hover:bg-gray-100">Rewards</a>
                        <a href="ai-expert.html" class="block px-4 py-2 hover:bg-gray-100">AI Expert</a>
                        <a href="blog.html" class="block px-4 py-2 hover:bg-gray-100 rounded-b-lg">Blog</a>
                    </div>
                </div>
                
                <a href="contact.html" class="hover:text-solar-gold transition-all-smooth">Contact</a>
                <a href="login.html" class="bg-solar-gold text-gray-900 px-4 py-2 rounded-lg font-bold hover:bg-solar-gold-dark transition-all-smooth">Login / Sign Up</a>
            </nav>

            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-white focus:outline-none">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden header-bg">
            <a href="index.html" class="block py-2 px-6 text-solar-gold font-semibold">Home</a>
            <a href="about.html" class="block py-2 px-6 hover:bg-gray-800 rounded">About Us</a>
            <a href="projects.html" class="block py-2 px-6 hover:bg-gray-800 rounded">Solutions</a>
            <a href="calculator.html" class="block py-2 px-6 hover:bg-gray-800 rounded">Calculator</a>
            <a href="financing.html" class="block py-2 px-6 hover:bg-gray-800 rounded">Financing</a>
            <a href="rewards.html" class="block py-2 px-6 hover:bg-gray-800 rounded">Rewards</a>
            <a href="ai-expert.html" class="block py-2 px-6 hover:bg-gray-800 rounded">AI Expert</a>
            <a href="blog.html" class="block py-2 px-6 hover:bg-gray-800 rounded">Blog</a>
            <a href="contact.html" class="block py-2 px-6 hover:bg-gray-800 rounded">Contact</a>
            <a href="login.html" class="block mt-2 mx-4 mb-4 text-center bg-solar-gold text-gray-900 px-4 py-2 rounded-lg font-bold hover:bg-solar-gold-dark transition-all-smooth">Login / Sign Up</a>
        </div>
    </header>

    <main>
        <section class="bg-gray-900 text-white" style="background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('images/hero.jpg'); background-size: cover; background-position: center;">
            <div class="container mx-auto px-6 py-24 md:py-32 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold leading-tight tracking-tight animate-fadeInUp" style="animation-delay: 0.1s;">
                    Reliable Solar Energy for Your <span class="solar-gold">Home & Business</span>
                </h1>
                <p class="mt-6 text-lg md:text-xl max-w-3xl mx-auto text-gray-300 animate-fadeInUp" style="animation-delay: 0.3s;">
                    Harness the power of the sun with Ranchi's most trusted solar EPC partner. We deliver high-performance solar solutions for residential, commercial, and industrial clients.
                </p>
                <div class="mt-10 flex flex-col sm:flex-row justify-center items-center gap-4 animate-fadeInUp" style="animation-delay: 0.5s;">
                    <a href="calculator.html" class="w-full sm:w-auto bg-solar-gold text-gray-900 px-8 py-4 rounded-lg font-bold text-lg hover:bg-solar-gold-dark transition-all-smooth">
                        Calculate Your Savings
                    </a>
                    <a href="contact.html" class="w-full sm:w-auto bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-white hover:text-gray-900 transition-all-smooth">
                        Get a Free Quote
                    </a>
                </div>
            </div>
        </section>

        <section class="bg-amber-100 border-y border-amber-300">
            <div class="container mx-auto px-6 py-12 md:py-16">
                <div class="flex flex-col lg:flex-row items-center gap-8">
                    <div class="flex-shrink-0">
                        <div class="p-4 bg-solar-gold rounded-full text-gray-900">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" viewBox="0 0 20 20" fill="currentColor">
                              <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                           </svg>
                        </div>
                    </div>
                    <div class="text-center lg:text-left flex-grow">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-900">Power Your Home with PM Surya Ghar: Muft Bijli Yojana</h2>
                        <p class="mt-2 text-lg text-gray-700">Go solar with minimum investment. Avail massive government subsidies and enjoy free electricity for years to come. We are experts in the PM Surya Ghar scheme.</p>
                    </div>
                    <div class="flex-shrink-0 mt-4 lg:mt-0">
                        <a href="pm-surya-ghar.html" class="bg-gray-900 text-white px-8 py-4 rounded-lg font-bold hover:bg-gray-700 transition-all-smooth">
                            Explore the Scheme
                        </a>
                    </div>
                </div>
            </div>
        </section>


        <section class="py-16 md:py-24 section-bg-pattern">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Your Partner in Sustainable Energy</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">We provide tailored solar solutions for every need, ensuring maximum efficiency and return on investment.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-white p-8 project-card">
                        <div class="flex items-center justify-center bg-amber-100 text-solar-gold rounded-full w-16 h-16 mb-6">
                            <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5A2.25 2.25 0 0021 18.75V8.25A2.25 2.25 0 0018.75 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h4.5M12 14.25h.008v.008H12v-.008z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Residential Rooftop</h3>
                        <p class="text-gray-600">Eliminate your electricity bills with a custom solar solution for your home, fully compliant with all government schemes.</p>
                    </div>
                    <div class="bg-white p-8 project-card">
                        <div class="flex items-center justify-center bg-amber-100 text-solar-gold rounded-full w-16 h-16 mb-6">
                           <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6.375a.375.375 0 01.375.375v1.5a.375.375 0 01-.375.375H9a.375.375 0 01-.375-.375v-1.5A.375.375 0 019 6.75zM9 12.75h6.375a.375.375 0 01.375.375v1.5a.375.375 0 01-.375.375H9a.375.375 0 01-.375-.375v-1.5A.375.375 0 019 12.75z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Commercial & Industrial</h3>
                        <p class="text-gray-600">Reduce operational costs and enhance your green credentials with a powerful C&I solar plant.</p>
                    </div>
                    <div class="bg-white p-8 project-card">
                        <div class="flex items-center justify-center bg-amber-100 text-solar-gold rounded-full w-16 h-16 mb-6">
                            <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.82m5.84-2.56v4.82a6 6 0 01-1.82.33h-3.22a6 6 0 01-5.84-7.38v-4.82a6 6 0 015.84-2.56h3.22a6 6 0 011.82.33v4.82z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Petrol Pumps</h3>
                        <p class="text-gray-600">Ensure uninterrupted power for your fuel station with our reliable and cost-effective solar solutions.</p>
                    </div>
                    <div class="bg-white p-8 project-card">
                        <div class="flex items-center justify-center bg-amber-100 text-solar-gold rounded-full w-16 h-16 mb-6">
                            <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Institutional & Govt.</h3>
                        <p class="text-gray-600">Powering schools, hospitals, and government buildings with sustainable and dependable solar energy.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16 md:py-24 bg-gray-100 ai-expert-section ai-chat-container">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Ask Our AI Expert, Viaan!</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">Have questions about solar energy? Get instant answers from our intelligent AI assistant.</p>
                </div>
                <div class="max-w-3xl mx-auto">
                    <div class="bg-white dashboard-card">
                        <div id="response-area-home" class="p-8 min-h-[200px] prose max-w-none">
                            <h3 class="!mt-0">Welcome!</h3>
                            <p>I'm your AI Solar Expert from Dakshayani Enterprises. My name is Viaan. I can help you with questions about solar technology, the PM Surya Ghar Muft Bijli Yojana, financing, or anything else related to going solar in Jharkhand.</p>
                            <p>For example, you could ask:</p>
                            <ul>
                                <li>"How much subsidy can I get for a 3kW system?"</li>
                                <li>"What are the benefits of monocrystalline panels?"</li>
                                <li>"How does net metering work in Ranchi?"</li>
                            </ul>
                            <p>Just type your question below and I'll do my best to answer!</p>
                        </div>

                        <div id="loader-home" class="text-center p-10 hidden">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-solar-gold mx-auto"></div>
                            <p class="mt-4 text-gray-600">Thinking...</p>
                        </div>
                        
                        <div class="p-6 bg-gray-50 border-t rounded-b-lg">
                            <form id="ai-expert-form-home" class="flex flex-col sm:flex-row gap-4">
                                <input type="text" id="user-question-home" class="flex-grow block w-full py-3 px-4 border-gray-300 rounded-lg shadow-sm focus:ring-solar-gold focus:border-solar-gold" placeholder="Ask your question here..." required>
                                <button type="submit" id="ask-button-home" class="bg-solar-gold text-gray-900 px-8 py-3 rounded-lg font-bold hover:bg-solar-gold-dark transition-all-smooth flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM6.293 6.293a1 1 0 011.414 0L10 8.586l2.293-2.293a1 1 0 111.414 1.414L11.414 10l2.293 2.293a1 1 0 01-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 01-1.414-1.414L8.586 10 6.293 7.707a1 1 0 010-1.414z" /></svg>
                                    Ask AI
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16 md:py-24 section-bg-pattern">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Go Solar in 4 Simple Steps</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">We've streamlined the entire process to make your transition to solar seamless and hassle-free.</p>
                </div>
                <div class="relative">
                    <div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-gray-300 -translate-y-1/2"></div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 relative">
                        <div class="text-center">
                            <div class="relative mb-4">
                                <div class="mx-auto w-20 h-20 flex items-center justify-center bg-white border-4 border-gray-300 rounded-full text-2xl font-bold text-solar-gold z-10 relative">1</div>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900">Consult & Design</h3>
                            <p class="mt-2 text-gray-600">Free site assessment and a custom-designed system tailored to your energy needs.</p>
                        </div>
                        <div class="text-center">
                            <div class="relative mb-4">
                                <div class="mx-auto w-20 h-20 flex items-center justify-center bg-white border-4 border-gray-300 rounded-full text-2xl font-bold text-solar-gold z-10 relative">2</div>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900">Approve & Finance</h3>
                            <p class="mt-2 text-gray-600">Review your proposal. We'll help you secure financing and handle all approvals.</p>
                        </div>
                        <div class="text-center">
                            <div class="relative mb-4">
                                <div class="mx-auto w-20 h-20 flex items-center justify-center bg-white border-4 border-gray-300 rounded-full text-2xl font-bold text-solar-gold z-10 relative">3</div>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900">Installation</h3>
                            <p class="mt-2 text-gray-600">Our certified team installs your system with precision and care, typically in 1-3 days.</p>
                        </div>
                        <div class="text-center">
                            <div class="relative mb-4">
                                <div class="mx-auto w-20 h-20 flex items-center justify-center bg-white border-4 border-gray-300 rounded-full text-2xl font-bold text-solar-gold z-10 relative">4</div>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900">Power On & Save</h3>
                            <p class="mt-2 text-gray-600">We manage the net-metering process. Flip the switch and start saving on your bills!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="fixed-contact-buttons">
        <a href="tel:+917070278178" class="fixed-contact-button call" title="Call Us">
            <i class="fas fa-phone"></i>
        </a>
        <a href="https://wa.me/917070278178" target="_blank" rel="noopener noreferrer" class="fixed-contact-button whatsapp" title="WhatsApp Us">
            <i class="fab fa-whatsapp"></i>
        </a>
        <a href="mailto:d.entranchi@gmail.com" class="fixed-contact-button email" title="Email Us">
            <i class="fas fa-envelope"></i>
        </a>
        <a href="https://pmsuryaghar.gov.in" target="_blank" rel="noopener noreferrer" class="fixed-contact-button pmsgy" title="Visit PM Surya Ghar Website">
            <i class="fas fa-solar-panel"></i>
        </a>
    </div>

    <footer class="header-bg text-white">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <a href="index.html" class="flex items-center space-x-2 mb-4">
                        <div class="flex items-center space-x-2 logo-container">
                            <img src="images/New dakshayani logo centered small.png" alt="Dakshayani Enterprises Logo" class="h-6 w-auto">
                            <span class="text-xl font-extrabold tracking-tight text-gray-900">Dakshayani Enterprises</span>
                        </div>
                    </a>
                    <p class="text-gray-400">Your trusted partner for a sustainable future. Based in Ranchi, serving all of Jharkhand.</p>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="about.html" class="hover:text-solar-gold transition-all-smooth">About Us</a></li>
                        <li><a href="projects.html" class="hover:text-solar-gold transition-all-smooth">Our Work</a></li>
                        <li><a href="contact.html" class="hover:text-solar-gold transition-all-smooth">Contact</a></li>
                        <li><a href="blog.html" class="hover:text-solar-gold transition-all-smooth">Blog</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4">Solutions</h4>
                    <ul class="space-y-2">
                        <li><a href="projects.html#residential" class="hover:text-solar-gold transition-all-smooth">Residential Solar</a></li>
                        <li><a href="projects.html#commercial" class="hover:text-solar-gold transition-all-smooth">Commercial Solar</a></li>
                        <li><a href="calculator.html" class="hover:text-solar-gold transition-all-smooth">Solar Calculator</a></li>
                        <li><a href="financing.html" class="hover:text-solar-gold transition-all-smooth">Financing Options</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4">Policies</h4>
                    <ul class="space-y-2">
                        <li><a href="policies.html#privacy" class="hover:text-solar-gold transition-all-smooth">Privacy Policy</a></li>
                        <li><a href="policies.html#terms" class="hover:text-solar-gold transition-all-smooth">Terms & Conditions</a></li>
                        <li><a href="policies.html#warranty" class="hover:text-solar-gold transition-all-smooth">Warranty Information</a></li>
                        <li><a href="policies.html#refund" class="hover:text-solar-gold transition-all-smooth">Return & Refund Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="flex space-x-4 mt-8 mb-4 justify-center md:justify-start">
                <a href="https://facebook.com/d.entranchi" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-700 text-white hover:bg-blue-800 transition-all-smooth" title="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://instagram.com/d.entranchi" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-10 h-10 rounded-full bg-pink-600 text-white hover:bg-pink-700 transition-all-smooth" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
            <div class="mt-4 md:mt-0 border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 text-sm">Â© 2025 Dakshayani Enterprises. All Rights Reserved.</p>
            </div>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // Add subtle scroll animations to sections
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    // Uses the .animate-fadeInUp class from style.css
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fadeInUp');
                    }
                });
            }, { 
                threshold: 0.1 
            });

            // Apply observer to direct children of main sections
            document.querySelectorAll('main section > div').forEach(el => {
                observer.observe(el);
            });

            // --- AI Expert Logic for Homepage (Keep the original logic) ---
            const aiFormHome = document.getElementById('ai-expert-form-home');
            const responseAreaHome = document.getElementById('response-area-home');
            const loaderHome = document.getElementById('loader-home');
            const askButtonHome = document.getElementById('ask-button-home');
            const userInputHome = document.getElementById('user-question-home');

            if (aiFormHome) {
                aiFormHome.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const question = userInputHome.value.trim();
                    if (!question) return;

                    // Show loader and disable form
                    responseAreaHome.classList.add('hidden');
                    loaderHome.classList.remove('hidden');
                    askButtonHome.disabled = true;
                    askButtonHome.innerHTML = 'Thinking...';
                    
                    const prompt = `
                        You are a helpful, friendly, and expert AI assistant for Dakshayani Enterprises, a leading solar EPC company in Ranchi, Jharkhand, India.
                        Your name is Viaan.
                        Your goal is to provide accurate and encouraging information to potential customers.
                        Always maintain a professional and supportive tone.
                        If you don't know an answer, say that you will have a human expert from Dakshayani Enterprises follow up. Do not make up information.
                        Keep the context of Jharkhand, India, in mind, especially regarding policies like the PM Surya Ghar Muft Bijli Yojana.

                        Here is the user's question: "${question}"

                        Please provide a clear, well-formatted answer using Markdown.
                    `;

                    try {
                        let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                        const payload = { contents: chatHistory };
                        const apiKey = "AIzaSyDF2y0RRVZfINmEYYZqTmhRH50te6RZ57A"; // API key managed by environment
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                        
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            const errorData = await response.json();
                            console.error("API Error Response:", errorData);
                            throw new Error(`API Error: ${response.status} - ${errorData.error.message || response.statusText}`);
                        }

                        const result = await response.json();
                        
                        if (result.candidates && result.candidates[0].content.parts[0].text) {
                            const aiResponse = result.candidates[0].content.parts[0].text;
                            // Basic markdown to HTML conversion (uses classes defined in style.css)
                            let htmlContent = aiResponse
                                .replace(/### (.*)/g, '<h3 class="!text-xl !font-bold !text-gray-800 !mt-4 !mb-2">$1</h3>')
                                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                                .replace(/\* (.*)/g, '<li class="ml-5 list-disc">$1</li>')
                                .replace(/\n/g, '<br>');

                            responseAreaHome.innerHTML = htmlContent;
                        } else {
                            throw new Error("No content received from API.");
                        }

                    } catch (error) {
                        console.error("Error fetching AI response:", error);
                        responseAreaHome.innerHTML = '<p class="text-red-600">I apologize, but I encountered an error trying to answer your question. This might be due to an invalid API key or a temporary service issue. Please ensure your API key is correct and try again shortly, or <a href="contact.html" class="underline">contact us directly</a> for assistance.</p>';
                    } finally {
                        // Hide loader and re-enable form
                        loaderHome.classList.add('hidden');
                        responseAreaHome.classList.remove('hidden');
                        askButtonHome.disabled = false;
                        askButtonHome.innerHTML = 'Ask AI';
                        userInputHome.value = ''; // Clear input
                    }
                    // Scroll to the response area
                    responseAreaHome.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                });
            }
        });
    </script>
</body>
</html>
